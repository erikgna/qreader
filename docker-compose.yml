version: "3.8"

networks:
  web:
    external: true

services:
  app:
    image: nginx:latest
    ports:
      - "8035:80"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.pwa.rule=Host(`pwa.erikna.com`)"
      - "traefik.http.routers.pwa.entrypoints=web, websecure"
      - "traefik.http.routers.pwa.tls=true"
      - "traefik.http.routers.pwa.tls.certresolver=production"
      - "traefik.http.services.pwa.loadbalancer.server.port=8035"
    volumes:
      - ./mobile/index.html:/usr/share/nginx/html/index.html
      - ./mobile/scripts.js:/usr/share/nginx/html/scripts.js
      - ./mobile/service-worker.js:/usr/share/nginx/html/service-worker.js
      - ./nginx.conf:/etc/nginx/nginx.conf
    networks:
      - web
